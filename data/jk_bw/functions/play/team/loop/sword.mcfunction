# 有无剑/非木剑
execute store success score @s jk_bw_PlayerHasSword run clear @s #jk_bw:sword/any 0
execute store success score @s jk_bw_PlayerHasSwordNotWood run clear @s #jk_bw:sword/not_wood 0

# 有非木剑时清理木剑，无剑时给予木剑
clear @s[scores={jk_bw_PlayerHasSwordNotWood=1}] wooden_sword
give @s[scores={jk_bw_PlayerHasSword=0,jk_bw_PlayerHasSwordNotWood=0}] wooden_sword{Unbreakable:1,CanDestroy:["#jk_bw:candestroy"],jk_bw_clean:1,jk_bw_sword:0,HideFlags:28,AttributeModifiers:[{Operation:0,Amount:7.6,UUID:[I;1,0,0,1],AttributeName:"generic.attack_speed",Name:"a",Slot:"mainhand"},{Operation:0,Amount:4,UUID:[I;1,0,0,1],AttributeName:"generic.attack_damage",Name:"a",Slot:"mainhand"}]}

# 锋利剑的清理
execute if entity @e[tag=jk_bw_spawn_red,limit=1,scores={jk_bw_TeamSharpness=0}] run clear @s[team=jk_bw_red] #jk_bw:sword/any{Enchantments:[{id:"minecraft:sharpness"}]}
execute if entity @e[tag=jk_bw_spawn_blue,limit=1,scores={jk_bw_TeamSharpness=0}] run clear @s[team=jk_bw_blue] #jk_bw:sword/any{Enchantments:[{id:"minecraft:sharpness"}]}
execute if entity @e[tag=jk_bw_spawn_green,limit=1,scores={jk_bw_TeamSharpness=0}] run clear @s[team=jk_bw_green] #jk_bw:sword/any{Enchantments:[{id:"minecraft:sharpness"}]}
execute if entity @e[tag=jk_bw_spawn_yellow,limit=1,scores={jk_bw_TeamSharpness=0}] run clear @s[team=jk_bw_yellow] #jk_bw:sword/any{Enchantments:[{id:"minecraft:sharpness"}]}

# 锋利剑的获取（enchant无法覆盖attribute，所以只是形式附魔）
execute if entity @e[tag=jk_bw_spawn_red,limit=1,scores={jk_bw_TeamSharpness=1}] run item replace entity @s[team=jk_bw_red,nbt={SelectedItemSlot:0,SelectedItem:{tag:{jk_bw_sword:0}}}] hotbar.0 with wooden_sword{Unbreakable:1,CanDestroy:["#jk_bw:candestroy"],jk_bw_clean:1,HideFlags:28,AttributeModifiers:[{Operation:0,Amount:7.6,UUID:[I;1,0,0,1],AttributeName:"generic.attack_speed",Name:"a",Slot:"mainhand"},{Operation:0,Amount:5.25,UUID:[I;1,0,0,1],AttributeName:"generic.attack_damage",Name:"a",Slot:"mainhand"}],Enchantments:[{id:"minecraft:sharpness",lvl:1}]}
execute if entity @e[tag=jk_bw_spawn_red,limit=1,scores={jk_bw_TeamSharpness=1}] run item replace entity @s[team=jk_bw_red,nbt={SelectedItemSlot:0,SelectedItem:{tag:{jk_bw_sword:1}}}] hotbar.0 with stone_sword{Unbreakable:1,CanDestroy:["#jk_bw:candestroy"],HideFlags:28,AttributeModifiers:[{Operation:0,Amount:7.6,UUID:[I;1,0,0,1],AttributeName:"generic.attack_speed",Name:"a",Slot:"mainhand"},{Operation:0,Amount:6.25,UUID:[I;1,0,0,1],AttributeName:"generic.attack_damage",Name:"a",Slot:"mainhand"}],Enchantments:[{id:"minecraft:sharpness",lvl:1}]}
execute if entity @e[tag=jk_bw_spawn_red,limit=1,scores={jk_bw_TeamSharpness=1}] run item replace entity @s[team=jk_bw_red,nbt={SelectedItemSlot:0,SelectedItem:{tag:{jk_bw_sword:2}}}] hotbar.0 with iron_sword{Unbreakable:1,CanDestroy:["#jk_bw:candestroy"],HideFlags:28,AttributeModifiers:[{Operation:0,Amount:7.6,UUID:[I;1,0,0,1],AttributeName:"generic.attack_speed",Name:"a",Slot:"mainhand"},{Operation:0,Amount:7.25,UUID:[I;1,0,0,1],AttributeName:"generic.attack_damage",Name:"a",Slot:"mainhand"}],Enchantments:[{id:"minecraft:sharpness",lvl:1}]}
execute if entity @e[tag=jk_bw_spawn_red,limit=1,scores={jk_bw_TeamSharpness=1}] run item replace entity @s[team=jk_bw_red,nbt={SelectedItemSlot:0,SelectedItem:{tag:{jk_bw_sword:3}}}] hotbar.0 with diamond_sword{Unbreakable:1,CanDestroy:["#jk_bw:candestroy"],HideFlags:28,AttributeModifiers:[{Operation:0,Amount:7.6,UUID:[I;1,0,0,1],AttributeName:"generic.attack_speed",Name:"a",Slot:"mainhand"},{Operation:0,Amount:8.25,UUID:[I;1,0,0,1],AttributeName:"generic.attack_damage",Name:"a",Slot:"mainhand"}],Enchantments:[{id:"minecraft:sharpness",lvl:1}]}

execute if entity @e[tag=jk_bw_spawn_blue,limit=1,scores={jk_bw_TeamSharpness=1}] run item replace entity @s[team=jk_bw_blue,nbt={SelectedItemSlot:0,SelectedItem:{tag:{jk_bw_sword:0}}}] hotbar.0 with wooden_sword{Unbreakable:1,CanDestroy:["#jk_bw:candestroy"],jk_bw_clean:1,HideFlags:28,AttributeModifiers:[{Operation:0,Amount:7.6,UUID:[I;1,0,0,1],AttributeName:"generic.attack_speed",Name:"a",Slot:"mainhand"},{Operation:0,Amount:5.25,UUID:[I;1,0,0,1],AttributeName:"generic.attack_damage",Name:"a",Slot:"mainhand"}],Enchantments:[{id:"minecraft:sharpness",lvl:1}]}
execute if entity @e[tag=jk_bw_spawn_blue,limit=1,scores={jk_bw_TeamSharpness=1}] run item replace entity @s[team=jk_bw_blue,nbt={SelectedItemSlot:0,SelectedItem:{tag:{jk_bw_sword:1}}}] hotbar.0 with stone_sword{Unbreakable:1,CanDestroy:["#jk_bw:candestroy"],HideFlags:28,AttributeModifiers:[{Operation:0,Amount:7.6,UUID:[I;1,0,0,1],AttributeName:"generic.attack_speed",Name:"a",Slot:"mainhand"},{Operation:0,Amount:6.25,UUID:[I;1,0,0,1],AttributeName:"generic.attack_damage",Name:"a",Slot:"mainhand"}],Enchantments:[{id:"minecraft:sharpness",lvl:1}]}
execute if entity @e[tag=jk_bw_spawn_blue,limit=1,scores={jk_bw_TeamSharpness=1}] run item replace entity @s[team=jk_bw_blue,nbt={SelectedItemSlot:0,SelectedItem:{tag:{jk_bw_sword:2}}}] hotbar.0 with iron_sword{Unbreakable:1,CanDestroy:["#jk_bw:candestroy"],HideFlags:28,AttributeModifiers:[{Operation:0,Amount:7.6,UUID:[I;1,0,0,1],AttributeName:"generic.attack_speed",Name:"a",Slot:"mainhand"},{Operation:0,Amount:7.25,UUID:[I;1,0,0,1],AttributeName:"generic.attack_damage",Name:"a",Slot:"mainhand"}],Enchantments:[{id:"minecraft:sharpness",lvl:1}]}
execute if entity @e[tag=jk_bw_spawn_blue,limit=1,scores={jk_bw_TeamSharpness=1}] run item replace entity @s[team=jk_bw_blue,nbt={SelectedItemSlot:0,SelectedItem:{tag:{jk_bw_sword:3}}}] hotbar.0 with diamond_sword{Unbreakable:1,CanDestroy:["#jk_bw:candestroy"],HideFlags:28,AttributeModifiers:[{Operation:0,Amount:7.6,UUID:[I;1,0,0,1],AttributeName:"generic.attack_speed",Name:"a",Slot:"mainhand"},{Operation:0,Amount:8.25,UUID:[I;1,0,0,1],AttributeName:"generic.attack_damage",Name:"a",Slot:"mainhand"}],Enchantments:[{id:"minecraft:sharpness",lvl:1}]}

execute if entity @e[tag=jk_bw_spawn_green,limit=1,scores={jk_bw_TeamSharpness=1}] run item replace entity @s[team=jk_bw_green,nbt={SelectedItemSlot:0,SelectedItem:{tag:{jk_bw_sword:0}}}] hotbar.0 with wooden_sword{Unbreakable:1,CanDestroy:["#jk_bw:candestroy"],jk_bw_clean:1,HideFlags:28,AttributeModifiers:[{Operation:0,Amount:7.6,UUID:[I;1,0,0,1],AttributeName:"generic.attack_speed",Name:"a",Slot:"mainhand"},{Operation:0,Amount:5.25,UUID:[I;1,0,0,1],AttributeName:"generic.attack_damage",Name:"a",Slot:"mainhand"}],Enchantments:[{id:"minecraft:sharpness",lvl:1}]}
execute if entity @e[tag=jk_bw_spawn_green,limit=1,scores={jk_bw_TeamSharpness=1}] run item replace entity @s[team=jk_bw_green,nbt={SelectedItemSlot:0,SelectedItem:{tag:{jk_bw_sword:1}}}] hotbar.0 with stone_sword{Unbreakable:1,CanDestroy:["#jk_bw:candestroy"],HideFlags:28,AttributeModifiers:[{Operation:0,Amount:7.6,UUID:[I;1,0,0,1],AttributeName:"generic.attack_speed",Name:"a",Slot:"mainhand"},{Operation:0,Amount:6.25,UUID:[I;1,0,0,1],AttributeName:"generic.attack_damage",Name:"a",Slot:"mainhand"}],Enchantments:[{id:"minecraft:sharpness",lvl:1}]}
execute if entity @e[tag=jk_bw_spawn_green,limit=1,scores={jk_bw_TeamSharpness=1}] run item replace entity @s[team=jk_bw_green,nbt={SelectedItemSlot:0,SelectedItem:{tag:{jk_bw_sword:2}}}] hotbar.0 with iron_sword{Unbreakable:1,CanDestroy:["#jk_bw:candestroy"],HideFlags:28,AttributeModifiers:[{Operation:0,Amount:7.6,UUID:[I;1,0,0,1],AttributeName:"generic.attack_speed",Name:"a",Slot:"mainhand"},{Operation:0,Amount:7.25,UUID:[I;1,0,0,1],AttributeName:"generic.attack_damage",Name:"a",Slot:"mainhand"}],Enchantments:[{id:"minecraft:sharpness",lvl:1}]}
execute if entity @e[tag=jk_bw_spawn_green,limit=1,scores={jk_bw_TeamSharpness=1}] run item replace entity @s[team=jk_bw_green,nbt={SelectedItemSlot:0,SelectedItem:{tag:{jk_bw_sword:3}}}] hotbar.0 with diamond_sword{Unbreakable:1,CanDestroy:["#jk_bw:candestroy"],HideFlags:28,AttributeModifiers:[{Operation:0,Amount:7.6,UUID:[I;1,0,0,1],AttributeName:"generic.attack_speed",Name:"a",Slot:"mainhand"},{Operation:0,Amount:8.25,UUID:[I;1,0,0,1],AttributeName:"generic.attack_damage",Name:"a",Slot:"mainhand"}],Enchantments:[{id:"minecraft:sharpness",lvl:1}]}

execute if entity @e[tag=jk_bw_spawn_yellow,limit=1,scores={jk_bw_TeamSharpness=1}] run item replace entity @s[team=jk_bw_yellow,nbt={SelectedItemSlot:0,SelectedItem:{tag:{jk_bw_sword:0}}}] hotbar.0 with wooden_sword{Unbreakable:1,CanDestroy:["#jk_bw:candestroy"],jk_bw_clean:1,HideFlags:28,AttributeModifiers:[{Operation:0,Amount:7.6,UUID:[I;1,0,0,1],AttributeName:"generic.attack_speed",Name:"a",Slot:"mainhand"},{Operation:0,Amount:5.25,UUID:[I;1,0,0,1],AttributeName:"generic.attack_damage",Name:"a",Slot:"mainhand"}],Enchantments:[{id:"minecraft:sharpness",lvl:1}]}
execute if entity @e[tag=jk_bw_spawn_yellow,limit=1,scores={jk_bw_TeamSharpness=1}] run item replace entity @s[team=jk_bw_yellow,nbt={SelectedItemSlot:0,SelectedItem:{tag:{jk_bw_sword:1}}}] hotbar.0 with stone_sword{Unbreakable:1,CanDestroy:["#jk_bw:candestroy"],HideFlags:28,AttributeModifiers:[{Operation:0,Amount:7.6,UUID:[I;1,0,0,1],AttributeName:"generic.attack_speed",Name:"a",Slot:"mainhand"},{Operation:0,Amount:6.25,UUID:[I;1,0,0,1],AttributeName:"generic.attack_damage",Name:"a",Slot:"mainhand"}],Enchantments:[{id:"minecraft:sharpness",lvl:1}]}
execute if entity @e[tag=jk_bw_spawn_yellow,limit=1,scores={jk_bw_TeamSharpness=1}] run item replace entity @s[team=jk_bw_yellow,nbt={SelectedItemSlot:0,SelectedItem:{tag:{jk_bw_sword:2}}}] hotbar.0 with iron_sword{Unbreakable:1,CanDestroy:["#jk_bw:candestroy"],HideFlags:28,AttributeModifiers:[{Operation:0,Amount:7.6,UUID:[I;1,0,0,1],AttributeName:"generic.attack_speed",Name:"a",Slot:"mainhand"},{Operation:0,Amount:7.25,UUID:[I;1,0,0,1],AttributeName:"generic.attack_damage",Name:"a",Slot:"mainhand"}],Enchantments:[{id:"minecraft:sharpness",lvl:1}]}
execute if entity @e[tag=jk_bw_spawn_yellow,limit=1,scores={jk_bw_TeamSharpness=1}] run item replace entity @s[team=jk_bw_yellow,nbt={SelectedItemSlot:0,SelectedItem:{tag:{jk_bw_sword:3}}}] hotbar.0 with diamond_sword{Unbreakable:1,CanDestroy:["#jk_bw:candestroy"],HideFlags:28,AttributeModifiers:[{Operation:0,Amount:7.6,UUID:[I;1,0,0,1],AttributeName:"generic.attack_speed",Name:"a",Slot:"mainhand"},{Operation:0,Amount:8.25,UUID:[I;1,0,0,1],AttributeName:"generic.attack_damage",Name:"a",Slot:"mainhand"}],Enchantments:[{id:"minecraft:sharpness",lvl:1}]}

# 指南针
execute store success score @s jk_bw_PlayerHasCompass run clear @s compass 0
give @s[scores={jk_bw_PlayerHasCompass=0},team=jk_bw_red] compass{display:{Name:'"红队指南针"',Lore:['{"text":"开启队伍箱子的钥匙","color":"gray","italic":false}']},CanDestroy:["#jk_bw:candestroy"],HideFlags:28,jk_bw_clean:1}
give @s[scores={jk_bw_PlayerHasCompass=0},team=jk_bw_blue] compass{display:{Name:'"蓝队指南针"',Lore:['{"text":"开启队伍箱子的钥匙","color":"gray","italic":false}']},CanDestroy:["#jk_bw:candestroy"],HideFlags:28,jk_bw_clean:1}
give @s[scores={jk_bw_PlayerHasCompass=0},team=jk_bw_green] compass{display:{Name:'"绿队指南针"',Lore:['{"text":"开启队伍箱子的钥匙","color":"gray","italic":false}']},CanDestroy:["#jk_bw:candestroy"],HideFlags:28,jk_bw_clean:1}
give @s[scores={jk_bw_PlayerHasCompass=0},team=jk_bw_yellow] compass{display:{Name:'"黄队指南针"',Lore:['{"text":"开启队伍箱子的钥匙","color":"gray","italic":false}']},CanDestroy:["#jk_bw:candestroy"],HideFlags:28,jk_bw_clean:1}